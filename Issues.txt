bugfix/recommendations 작성 규칙
[yy/mm/dd] *고유코드
고유코드 : 버전/순서-심각도-분야
분야 : 화면출력 dsp 내부로직 alg
심각도 : 실행불가 ce 의도하지 않은 동작 ue 가벼운 경고 wn 최적화 제안 sr
버전 : 1.23.45 버전의 3번째 이슈 -> 012345c


[24/04/10] 000100a-ue-dsp (solved)
문제
animation_delay가 1이 아닐때 돌들의 출력이 이상해짐
원인
force_duration이 인수로 들어가는 event.call 함수에 딜레이 스케일링이 포함되어 있는데
이를 까먹고 number_call 함수에 들어가서 force_duration으로 event.call에 전달될 wait 인자를 입력할 때
한번 더 딜레이 스케일링을 해줌
해결
문제가 되는 부분의 외부 딜레이 스케일링 제거

[24/04/10] 000100b-ue-dsp (solved)
문제
여러 줄의 돌이 삭제될 때, 첫번째가 아닌 순서로 삭제되는 줄에 포함되는 떨어지는(막 배치한) 돌이
떨어지는 모션 출력 후 stand 상태가 출력되지 않고 잠시 사라졌다가 돌 삭제 모션이 재생됨
원인
block_delete 함수에서 삭제될 돌의 위치의 현재 출력이 stone_fall이면 다음 모션을 삭제하고
따로 딜레이를 갖고 나중에 나타나는 삭제 모션을 넣었는데
여기서 줄 삭제가 하나가 아닐 때에 fall 모션과 delete 모션 사이에 있을 수 있는 간격을 고려하지 않았음
+
현재 여러 가지의 모션의 순차적 등장을 제어하는 방식은 current_event이 None인 event_call을 쓰거나
next_event에 리스트 형식으로 다양한 모션을 넣는 방식으로,
사건이 일어난 프레임에 모든 것을 제어하는 방식을 쓰고 있는데,
duration이 기본값으로 -1인 정지 모션에 force_duration을 줘서 출력 시간을 조정한다던가
기본적으로 event_call이 있을 때 같은 position을 가지는 모션들을 전부 삭제하는데
isappend를 줘서 삭제하지 않거나, 원래는 queue에 append를 해서 맨 뒤에 들어가는데
queue 탐색에 먼저 잡히기 위하여 isinsert를 줘서 index 0에 삽입한다던가 하는
버그를 유발하는 복잡하고 사용성이 떨어지는 기능과 인자들이 많음.
차라리 한 프레임에 몰아넣어서 복잡한 로직과 수많은 버그 가능성을 가지게 하기보다
임시로 만들어놓은 ListFuncQueue를 활용하여 event_call 자체나 다른 함수가 나중 프레임에 실행되게 만들고,
같은 position을 가진 모션이 둘 이상 존재할 수 없게 만들어
event_call과 event_check에 들어있는 각종 복잡한 딜레이 관련 기능을 제거하는게 나을 것 같음
+
하지만 이렇게 수정하면 미래에 어떤 모션이 등장할지 탐색하고 그에 따라 동작하는 로직에 문제가 생길 수 있음
해결
fall 모션과 delete 모션 사이에 있을 수 있는 간격을 고려하여 None->stand->delete 모션을 추가하도록 하였고,
그 중에서 stand 모션이 next_shape 안에 있을 때에도 force_duration 값을 설정할 수 있도록 event_check를 수정함

[24/04/10] 000100c-ue-dsp
문제
줄이 삭제될 때마다 score 옆의 숫자들이 올라가지 않고,
삭제될 수 있는 모든 줄이 삭제되고 난 후에 score 옆의 숫자들의 올라감
원인
찾는 중

[24/04/10] 000100d-ue-dsp
문제
아주 빨리 동작시키거나 줄을 제거할 때, 예를 들면 animation_delay를 높여서 동작할 시에
score나 turn의 출력이 제대로 되지 않음
+
000100c-ue-dsp 이슈를 해결하면 완화될 것으로 예상
원인
아마도?) score나 turn의 숫자의 모션이 잠깐의 대기 시간을 가지고 실행되는데 그 대기 시간 안에 수치를 높여
number_call을 다시 실행하게 될 경우 다시 대기가 걸려 출력이 지연됨

[24/04/10] 000100e-wn-dsp
문제
아주 빨리 동작시킬 때, 모든 명령을 다 실행시켜서 명령이 많이 쌓이면
명령을 중지한지 시간이 지나도 계속 실행하고 있음
